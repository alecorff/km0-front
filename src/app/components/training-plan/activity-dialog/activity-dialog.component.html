<div class="activity-dialog with-bg-map">

  <!-- Background polyline -->
  <div class="bg-map">
    <canvas #canvas></canvas>
  </div>

  <!-- Overlay pour lisibilité -->
  <div class="bg-overlay"></div>

  <!-- Contenu réel -->
  <div class="content">

    <h2 mat-dialog-title class="title">{{ data.name }}</h2>

    <h3 class="subtitle">
      <img class="flag" [src]="'assets/images/flag/' + country + '.png'" />
      <span>{{ city }}</span>
      <span>•</span>
      <span>
        {{ data.startDateLocal | date:'dd MMM yyyy' }},
        {{ data.startDateLocal | date:'HH:mm' }}
      </span>
    </h3>

    <div class="center-content">
      <div class="distance">
        {{ data.distance }} km
      </div>

      <div class="meta-line">
        {{ formatTime(data.movingTime) }} • {{ data.totalElevationGain }} m D+
      </div>

      <div class="stats-grid">
        <div class="stat-card" *ngIf="data.averageSpeed">
          <mat-icon>speed</mat-icon>{{ data.averageSpeed }}
        </div>

        <div class="stat-card" *ngIf="data.averageHeartrate">
          <mat-icon>favorite</mat-icon>{{ data.averageHeartrate }} bpm
        </div>
      </div>

      <div class="chip" *ngIf="data.sessionType">
        {{ data.sessionType }}
      </div>
    </div>

    <div class="footer">
      <button mat-raised-button class="button-actions" (click)="openStrava()">
      <img src="assets/images/strava.svg" class="strava-logo" /> Voir sur Strava
      </button>
    </div>

  </div>
</div>
